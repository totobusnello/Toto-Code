<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ln-114-frontend-docs-creator - State Diagram</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="stylesheet" href="../shared/css/diagram.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ln-114-frontend-docs-creator</h1>
            <p class="subtitle">L3 Worker - Frontend Documentation Creator - State Diagram</p>
        </header>

        <div class="info-box">
            <h3>Workflow Overview</h3>
            <ul>
                <li><strong>Purpose:</strong> Create design_guidelines.md (CONDITIONAL)</li>
                <li><strong>Invoked by:</strong> ln-110-project-docs-coordinator when hasFrontend</li>
                <li><strong>Key feature:</strong> WCAG 2.1 Level AA accessibility compliance</li>
            </ul>
        </div>

        <div class="legend">
            <div class="legend-item">
                <div class="legend-color color-action"></div>
                <span>Action</span>
            </div>
            <div class="legend-item">
                <div class="legend-color color-decision"></div>
                <span>Decision</span>
            </div>
        </div>

        <div class="diagram-container">
            <div class="mermaid">
graph TD
    Start([Start: ln-114]) --> P1[Phase 1: Check Conditions<br/>Parse flags from coordinator]

    P1 --> CheckFlags{hasFrontend?}
    CheckFlags -->|No| EarlyReturn([Return empty result<br/>No frontend detected])
    CheckFlags -->|Yes| P2[Phase 2: Create Document]

    P2 --> Exists{design_guidelines.md<br/>exists?}
    Exists -->|Yes| Skip[Skip with log]
    Exists -->|No| Create[Copy template]

    Create --> DesignSystem[Populate Design System<br/>Material-UI, Ant Design, custom]
    DesignSystem --> Typography[Populate Typography<br/>font families, sizes, weights]
    Typography --> Colors[Populate Colors<br/>primary, secondary, accent]
    Colors --> Components[Populate Component Library<br/>detected components]
    Components --> WCAG[Add WCAG 2.1 AA<br/>references]
    WCAG --> Tokens[Extract design tokens<br/>CSS vars, tailwind, theme]
    Tokens --> TBD[Mark TBD for<br/>missing data]

    Skip --> P3
    TBD --> P3

    P3[Phase 3: Self-Validate] --> V1[Check SCOPE tag]
    V1 --> V2[Validate sections:<br/>Design System, Typography, Colors]
    V2 --> V3[Check WCAG references]
    V3 --> V4[Check Maintenance section]

    V4 --> P4[Phase 4: Return Status]
    P4 --> Output[Return to coordinator:<br/>created[], skipped[], tbd_count]
    Output --> End([End: 0-1 doc processed])

    classDef action fill:#C8E6C9,stroke:#388E3C,stroke-width:2px
    classDef decision fill:#FFE0B2,stroke:#E64A19,stroke-width:2px

    class P1,P2,Skip,Create,DesignSystem,Typography,Colors,Components,WCAG,Tokens,TBD,P3,V1,V2,V3,V4,P4,Output action
    class CheckFlags,Exists decision
            </div>
        </div>

        <div class="info-box">
            <h3>Conditional Document</h3>
            <ul>
                <li><strong>design_guidelines.md:</strong> Created when hasFrontend (react, vue, angular, svelte)</li>
                <li><strong>Contains:</strong> Design system, typography, colors, WCAG compliance</li>
                <li><strong>Sources:</strong> CSS variables, tailwind config, theme files</li>
            </ul>
        </div>

        <footer>
            <p>Generated for ln-114-frontend-docs-creator skill | Version 1.0.0</p>
            <p>Diagram format: Mermaid.js | Last updated: 2025-12-20</p>
        </footer>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>
