<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ln-781-build-verifier - Workflow Diagram</title>
    <link rel="stylesheet" href="../shared/css/diagram.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad: true, theme: 'default'});</script>
</head>
<body>
    <h1>ln-781-build-verifier</h1>
    <p>L3 Worker - Builds all detected projects and verifies compilation</p>

    <h2>Build Workflow</h2>
    <div class="mermaid">
flowchart TD
    Start([Start Build Verification]) --> Detect[Step 1: Detect Project Types]

    Detect --> Found{Projects Found?}
    Found -->|No| NoProjects([No Projects to Build])
    Found -->|Yes| Loop[For Each Project]

    Loop --> Restore[Step 2: Restore Dependencies]
    Restore --> RestoreOK{Dependencies OK?}
    RestoreOK -->|No| RestoreFail[Log Error]
    RestoreOK -->|Yes| Build[Step 3: Build Project]

    Build --> BuildOK{Build Success?}
    BuildOK -->|No| BuildFail[Log Error]
    BuildOK -->|Yes| Verify[Step 4: Verify Artifacts]

    Verify --> ArtifactsOK{Artifacts Exist?}
    ArtifactsOK -->|No| ArtifactFail[Log Missing Artifacts]
    ArtifactsOK -->|Yes| Success[Mark Success]

    RestoreFail --> Record[Record Result]
    BuildFail --> Record
    ArtifactFail --> Record
    Success --> Record

    Record --> More{More Projects?}
    More -->|Yes| Loop
    More -->|No| Report[Step 5: Report Results]

    Report --> Done([Return to Orchestrator])

    classDef success fill:#90EE90
    classDef fail fill:#FFB6C1
    classDef process fill:#E6E6FA
    class Success,Done success
    class RestoreFail,BuildFail,ArtifactFail,NoProjects fail
    class Detect,Restore,Build,Verify,Report process
    </div>

    <h2>Project Type Detection</h2>
    <div class="mermaid">
flowchart LR
    Scan[Scan Project Root] --> Check{Check Markers}

    Check --> NPM{package.json?}
    Check --> NET{*.csproj?}
    Check --> PY{setup.py?}
    Check --> GO{go.mod?}
    Check --> RUST{Cargo.toml?}

    NPM -->|Yes| NodeJS[Node.js Project]
    NET -->|Yes| DotNet[.NET Project]
    PY -->|Yes| Python[Python Project]
    GO -->|Yes| GoLang[Go Project]
    RUST -->|Yes| RustLang[Rust Project]

    NodeJS --> List[Add to Build List]
    DotNet --> List
    Python --> List
    GoLang --> List
    RustLang --> List

    classDef marker fill:#FFE4B5
    classDef type fill:#87CEEB
    class NPM,NET,PY,GO,RUST marker
    class NodeJS,DotNet,Python,GoLang,RustLang type
    </div>

    <footer>
        <p>ln-781-build-verifier v2.0.0 | Last Updated: 2026-01-10</p>
    </footer>
</body>
</html>
